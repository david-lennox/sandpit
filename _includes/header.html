<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>{{site.name}} - {{page.title}}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

	{% if page.tags %}
        <meta name="keywords" content="{{ page.tags }}">        
        {% endif %}

        <link rel="icon" type="image/png" href="{{site.baseurl}}/favicon.png">

        <!-- syntax highlighting CSS & FontAwesome-->
        <link rel="stylesheet" href="{{site.baseurl}}/assets/css/syntax.css">
        <link rel="stylesheet" href="{{site.baseurl}}/assets/css/font-awesome.min.css">

        <!-- Custom CSS -->
        <link href='http://fonts.googleapis.com/css?family=Poly:400,400italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="{{site.baseurl}}/assets/css/custom.css">

        <!-- Bootstrap -->
        <link rel="stylesheet" href="{{site.baseurl}}/assets/css/bootstrap.min.css">

        <!-- JQuery -->
        <script src="{{site.baseurl}}/assets/js/jquery-1.10.2.js"></script>
        <script type="text/javascript" src="{{site.baseurl}}/assets/js/yaml.js"></script>
        <script type="text/javascript" src="{{site.baseurl}}/assets/js/angular.js"></script>
        <script type="text/javascript" src="{{site.baseurl}}/assets/js/angular-ui-router.js"></script>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script>
    var myApp = angular.module("myApp", ['ui.router']);

    myApp.factory('dataservice', ['$http', function($http) {
        
        return{
            getReferences: function(){
                return $http.get('http://localhost:8000/sandpit/ngData/references.yml');
            }
        }
    }]);

    myApp.run(function(dataservice, $rootScope){
        dataservice.getReferences().then(function(refs){
            $rootScope.references = refs.data;
        })
    })

    myApp.directive("ref", function($rootScope){
        return{
            restrict: 'E',
            scope: {
                name: '@'
            },
            template: '<span>This is a refernece</span>',
            link: function(scope, el, attrs){
                var id = scope.name;
                var refs = $rootScope.references;
                debugger;
            }
        }
    });

    myApp.config(function($stateProvider, $urlRouterProvider){
        $urlRouterProvider.otherwise('/');

        $stateProvider
        .state('shell', {
            url: '/',
            template: document.querySelector("#mainTemplate").outerText,
            resolve: {
                r: function(dataservice){
                    return dataservice.getReferences();
                }
            }
        })
    })

    </script>

    </head>

    <body ng-app="myApp">

    